<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é£Ÿç”¨æ•™ç¨‹ - å°æ‡¿MP3å¤–é“¾ç›˜</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%);
            color: #1a1a1a;
            padding: 0 15px;
            min-height: 100vh;
        }

        .page-wrapper {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 0;
        }

        .back-home {
            display: inline-flex;
            align-items: center;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.7);
            border: 1px solid rgba(26, 26, 26, 0.1);
            border-radius: 12px;
            text-decoration: none;
            color: #1a1a1a;
            font-size: 14px;
            margin-bottom: 30px;
            transition: all 0.3s ease;
        }

        .back-home:hover {
            background: rgba(255, 255, 255, 0.9);
            transform: translateX(-3px);
        }

        .page-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .page-header h1 {
            font-size: 36px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .page-header p {
            font-size: 16px;
            color: #666;
        }

        .example-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 32px;
            margin-bottom: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
        }

        .example-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #1a1a1a;
        }

        .example-desc {
            font-size: 15px;
            color: #666;
            margin-bottom: 24px;
        }

        .example-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .preview-box {
            background: rgba(255, 255, 255, 0.5);
            border: 1px solid rgba(26, 26, 26, 0.1);
            border-radius: 14px;
            padding: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 180px;
        }

        .code-box {
            background: #1a1a1a;
            border-radius: 14px;
            overflow: hidden;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.05);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .code-lang {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.6);
            font-weight: 500;
        }

        .copy-btn {
            padding: 6px 14px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .copy-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .code-content {
            padding: 20px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.6;
            color: #e0e0e0;
        }

        .code-content pre {
            margin: 0;
            white-space: pre-wrap;
            word-break: break-all;
        }

        .label-tag {
            display: inline-block;
            padding: 4px 12px;
            background: rgba(26, 26, 26, 0.1);
            border-radius: 6px;
            font-size: 12px;
            color: #666;
            margin-top: 12px;
        }

        /* ==================== åä¸½æ’­æ”¾å™¨æ ·å¼ (å·²æ›´æ–°) ==================== */
        
        .player-preview {
            background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 50%, #d0d0d0 100%);
            padding: 50px 0;
            position: relative;
            overflow: hidden;
            min-height: 280px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hearts-bg {
            position: absolute;
            inset: 0;
            z-index: 0;
            pointer-events: none;
        }

        .heart, .ribbon {
            position: absolute;
            width: 30px;
            height: 30px;
            opacity: 0.3;
            animation: float-up linear infinite;
        }

        .heart::before { content: 'ğŸ’“'; font-size: 28px; }
        .ribbon::before { content: 'ğŸ€'; font-size: 28px; }
        .heart:nth-child(1) { left: 10%; animation-duration: 10s; animation-delay: 0s; }
        .heart:nth-child(2) { left: 30%; animation-duration: 12s; animation-delay: 2s; }
        .heart:nth-child(3) { left: 50%; animation-duration: 9s; animation-delay: 1s; }
        .heart:nth-child(4) { left: 70%; animation-duration: 11s; animation-delay: 3s; }
        .heart:nth-child(5) { left: 85%; animation-duration: 13s; animation-delay: 4s; }
        .ribbon:nth-child(6) { left: 15%; animation-duration: 9.5s; animation-delay: 1.5s; }
        .ribbon:nth-child(7) { left: 45%; animation-duration: 11.5s; animation-delay: 3.5s; }
        .ribbon:nth-child(8) { left: 65%; animation-duration: 8.5s; animation-delay: 2.5s; }
        .ribbon:nth-child(9) { left: 90%; animation-duration: 10.5s; animation-delay: 0.8s; }

        @keyframes float-up {
            0% { bottom: -50px; opacity: 0; }
            10% { opacity: 0.3; }
            90% { opacity: 0.3; }
            100% { bottom: 110%; opacity: 0; }
        }

        .player-wrapper {
            width: 100%;
            max-width: 620px;
            padding: 0 20px;
            position: relative;
            z-index: 1;
        }

        /* [MODIFIED] æ’­æ”¾å™¨ä¸»ä½“å¸ƒå±€ä¿®æ”¹
          ä» 2åˆ—grid æ”¹ä¸º flex-columnï¼Œä»¥å®¹çº³ å°é¢/æ§åˆ¶ + æ­Œè¯ + é¢‘è°± 
        */
        .luxury-player {
            max-width: 550px; 
            width: 100%;      
            margin: 0 auto;
            background: #ffffff; 
            border-radius: 24px; 
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); 
            padding: 24px;
            display: flex;
            flex-direction: column;
            gap: 20px; /* é¡¶éƒ¨/æ­Œè¯/é¢‘è°±ä¹‹é—´çš„é—´è· */
        }
        
        /* [NEW] æ–°å¢ä¸€ä¸ªå®¹å™¨åŒ…è£¹ å°é¢+æ§åˆ¶
          æ²¿ç”¨ä¹‹å‰çš„ 2åˆ—grid å¸ƒå±€
        */
        .player-main-content {
            display: grid;
            grid-template-columns: 140px 1fr;
            gap: 24px;
            align-items: center;
        }

        .album-cover-wrap {
            width: 140px;
            height: 140px;
            flex-shrink: 0;
        }

        .album-cover {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            overflow: hidden;
            position: relative;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.35);
            border: 4px solid rgba(255, 255, 255, 0.9);
            transition: transform 0.3s ease;
        }

        .album-cover:hover {
            transform: scale(1.05);
        }

        .album-cover.playing {
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .album-cover img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .player-right {
            display: flex;
            flex-direction: column;
            gap: 14px;
            min-height: 140px;
            justify-content: space-between;
            min-width: 0;
        }

        .song-info h4 {
            margin: 0 0 4px 0;
            font-size: 17px;
            font-weight: 600;
            color: #1a1a1a;
        }

        .song-info p {
            margin: 0;
            font-size: 13px;
            color: #666;
        }

        .progress-bar {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .time {
            font-size: 11px;
            color: #666;
            font-weight: 500;
            min-width: 38px;
            text-align: center;
            flex-shrink: 0;
        }

        .progress {
            flex: 1;
            height: 5px;
            background: rgba(26, 26, 26, 0.1);
            border-radius: 10px;
            position: relative;
            cursor: pointer;
            min-width: 0;
        }

        .progress:hover {
            height: 7px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            width: 0%;
            transition: width 0.1s linear;
        }

        .controls {
            display: flex;
            justify-content: flex-start;
            align-items: center;
            gap: 8px;
            flex-wrap: nowrap;
        }

        .control-btn {
            width: 40px;
            height: 40px;
            border: none;
            background: #ffffff;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 3px 12px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .control-btn:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
            background: #fafafa;
        }

        .control-btn:active {
            transform: scale(0.98);
            background: #f0f0f0;
        }

        .control-btn.active {
            background: #f5f5f5;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }

        .play-btn {
            width: 52px;
            height: 52px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        .icon {
            width: 16px;
            height: 16px;
            fill: #000000;
            stroke: #000000;
        }

        .play-btn .icon {
            width: 22px;
            height: 22px;
        }

        .player-toast {
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(16, 185, 129, 0.95);
            color: white;
            padding: 8px 16px;
            border-radius: 10px;
            font-size: 12px;
            font-weight: 500;
            opacity: 0;
            pointer-events: none;
            transition: all 0.4s ease;
            box-shadow: 0 4px 20px rgba(16, 185, 129, 0.4);
            white-space: nowrap;
            z-index: 10;
        }

        .player-toast.show {
            opacity: 1;
            top: -35px;
        }

        /* [NEW] æ–°å¢ï¼šæ­Œè¯å®¹å™¨æ ·å¼
        */
        .lyrics-container {
            width: 100%;
            height: 2.4em; /* é™åˆ¶é«˜åº¦ä¸ºä¸€è¡ŒåŠå·¦å³ */
            line-height: 1.2em;
            text-align: center;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #lyricsLine {
            margin: 0;
            font-size: 15px;
            font-weight: 500;
            color: #333;
            /* ç®€å•çš„æ·¡å…¥æ·¡å‡ºæ•ˆæœ */
            transition: opacity 0.2s ease;
        }

        /* [NEW] æ–°å¢ï¼šé¢‘è°±å®¹å™¨æ ·å¼
        */
        .spectrum-container {
            width: 100%;
            height: 70px; /* é¢‘è°±é«˜åº¦ */
            background: #f4f4f4;
            border-radius: 10px;
            overflow: hidden;
        }

        #audioSpectrum {
            width: 100%;
            height: 100%;
            display: block;
        }


        /* ==================== å“åº”å¼å¸ƒå±€ ==================== */
        
        @media (max-width: 900px) {
            body { padding: 0 15px; }
            .page-wrapper { padding: 32px 0; }
            .page-header h1 { font-size: 28px; }
            .example-content { grid-template-columns: 1fr; }
        }

        @media (max-width: 768px) {
            .player-preview { padding: 40px 0; min-height: 240px; }
            .player-wrapper { max-width: 560px; padding: 0 15px; }
        }

        @media (max-width: 640px) {
            .player-preview { padding: 35px 0; min-height: 220px; }
            .player-wrapper { max-width: 500px; padding: 0 12px; }
        }

        @media (max-width: 540px) {
            .player-preview { padding: 30px 0; min-height: 200px; }
            .player-wrapper { max-width: 450px; padding: 0 10px; }
        }

        @media (max-width: 460px) {
            .player-preview { padding: 25px 0; min-height: 180px; }
            .player-wrapper { max-width: 400px; padding: 0 8px; }
        }

        @media (max-width: 400px) {
            .player-preview { padding: 20px 0; min-height: 165px; }
            .player-wrapper { max-width: 360px; padding: 0 5px; }
        }

        /* [MODIFIED] å“åº”å¼è°ƒæ•´ 
          ç¡®ä¿ .player-main-content ä¹Ÿèƒ½æ­£ç¡®å †å 
        */
        @media (max-width: 420px) {
            .player-main-content {
                grid-template-columns: 1fr; /* å˜ä¸ºå•åˆ— */
                gap: 20px;
            }

            .album-cover-wrap {
                width: 120px;
                height: 120px;
                margin: 0 auto;
            }

            .player-right {
                min-height: auto;
                gap: 16px;
                align-items: center;
            }

            .song-info { text-align: center; }
            .progress-bar { width: 100%; }
            .controls { justify-content: center; }

            /* [NEW] è°ƒæ•´æ­Œè¯å’Œé¢‘è°± */
            .lyrics-container { height: 2.4em; }
            #lyricsLine { font-size: 14px; }
            .spectrum-container { height: 60px; }
        }

        /* ä»£ç é«˜äº® */
        .code-tag { color: #7dd3fc; }
        .code-attr { color: #fbbf24; }
        .code-value { color: #86efac; }
        .code-comment { color: #9ca3af; font-style: italic; }
    </style>
</head>
<body>
    <div class="page-wrapper">
        <a href="/" class="back-home">
            <svg style="width: 16px; height: 16px; margin-right: 6px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
            è¿”å›ä¸»é¡µ
        </a>

        <div class="page-header">
            <h1>MP3å¤–é“¾èƒ½åšä»€ä¹ˆï¼Ÿ</h1>
            <p>å°†ä½ çš„MP3æ–‡ä»¶åµŒå…¥åˆ°ä»»ä½•ç½‘é¡µä¸­ï¼Œå®ç°åœ¨çº¿æ’­æ”¾</p>
        </div>

        <!-- ç¤ºä¾‹1 ... ç¤ºä¾‹5 (ä¿æŒä¸å˜) -->
        
        <!-- ç¤ºä¾‹1 -->
        <div class="example-card">
            <h3 class="example-title">1. åŸºç¡€éŸ³é¢‘æ’­æ”¾å™¨</h3>
            <p class="example-desc">ä½¿ç”¨ HTML5 audio æ ‡ç­¾åˆ›å»ºç®€å•çš„éŸ³é¢‘æ’­æ”¾å™¨</p>
            
            <div class="example-content">
                <div class="preview-box">
                    <audio controls style="width: 100%; max-width: 400px;">
                        <source src="https://mp3.xiaoyi.ink/uploads/1761628772676-y9isn78aunm.mp3" type="audio/mpeg">
                    </audio>
                </div>
                
                <div class="code-box">
                    <div class="code-header">
                        <span class="code-lang">HTML</span>
                        <button class="copy-btn" onclick="copyCode(this, 'code1')">å¤åˆ¶ä»£ç </button>
                    </div>
                    <div class="code-content">
                        <pre id="code1"><span class="code-tag">&lt;audio</span> <span class="code-attr">controls</span><span class="code-tag">&gt;</span>
  <span class="code-tag">&lt;source</span> <span class="code-attr">src=</span><span class="code-value">"ä½ çš„MP3å¤–é“¾åœ°å€"</span> <span class="code-attr">type=</span><span class="code-value">"audio/mpeg"</span><span class="code-tag">&gt;</span>
  æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾
<span class="code-tag">&lt;/audio&gt;</span></pre>
                    </div>
                </div>
            </div>
            <span class="label-tag">æœ€åŸºç¡€çš„ç”¨æ³•</span>
        </div>

        <!-- ç¤ºä¾‹2 -->
        <div class="example-card">
            <h3 class="example-title">2. èƒŒæ™¯éŸ³ä¹ï¼ˆè‡ªåŠ¨æ’­æ”¾ï¼‰</h3>
            <p class="example-desc">ç½‘é¡µåŠ è½½æ—¶è‡ªåŠ¨æ’­æ”¾èƒŒæ™¯éŸ³ä¹ï¼Œå¾ªç¯æ’­æ”¾</p>
            
            <div class="example-content">
                <div class="preview-box">
                    <div style="text-align: center; color: #666;">
                        <svg style="width: 64px; height: 64px; margin-bottom: 12px; opacity: 0.3;" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/>
                        </svg>
                        <p>éŸ³ä¹å°†åœ¨é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ’­æ”¾</p>
                    </div>
                </div>
                
                <div class="code-box">
                    <div class="code-header">
                        <span class="code-lang">HTML</span>
                        <button class="copy-btn" onclick="copyCode(this, 'code2')">å¤åˆ¶ä»£ç </button>
                    </div>
                    <div class="code-content">
                        <pre id="code2"><span class="code-tag">&lt;audio</span> <span class="code-attr">autoplay</span> <span class="code-attr">loop</span><span class="code-tag">&gt;</span>
  <span class="code-tag">&lt;source</span> <span class="code-attr">src=</span><span class="code-value">"ä½ çš„MP3å¤–é“¾åœ°å€"</span> <span class="code-attr">type=</span><span class="code-value">"audio/mpeg"</span><span class="code-tag">&gt;</span>
<span class="code-tag">&lt;/audio&gt;</span>

<span class="code-comment">&lt;!-- å±æ€§è¯´æ˜ --&gt;</span>
<span class="code-comment">&lt;!-- autoplay: è‡ªåŠ¨æ’­æ”¾ --&gt;</span>
<span class="code-comment">&lt;!-- loop: å¾ªç¯æ’­æ”¾ --&gt;</span></pre>
                    </div>
                </div>
            </div>
            <span class="label-tag">é€‚åˆåšèƒŒæ™¯éŸ³ä¹</span>
        </div>

        <!-- ç¤ºä¾‹3 -->
        <div class="example-card">
            <h3 class="example-title">3. è‡ªå®šä¹‰æ ·å¼æ’­æ”¾å™¨</h3>
            <p class="example-desc">é€šè¿‡ CSS ç¾åŒ–éŸ³é¢‘æ’­æ”¾å™¨å¤–è§‚</p>
            
            <div class="example-content">
                <div class="preview-box">
                    <audio controls style="width: 100%; max-width: 400px; border-radius: 20px;">
                        <source src="https://mp3.xiaoyi.ink/uploads/1761628772676-y9isn78aunm.mp3" type="audio/mpeg">
                    </audio>
                </div>
                
                <div class="code-box">
                    <div class="code-header">
                        <span class="code-lang">HTML + CSS</span>
                        <button class="copy-btn" onclick="copyCode(this, 'code3')">å¤åˆ¶ä»£ç </button>
                    </div>
                    <div class="code-content">
                        <pre id="code3"><span class="code-tag">&lt;style&gt;</span>
  .custom-audio {
    width: 100%;
    border-radius: 20px;
  }
<span class="code-tag">&lt;/style&gt;</span>

<span class="code-tag">&lt;audio</span> <span class="code-attr">controls</span> <span class="code-attr">class=</span><span class="code-value">"custom-audio"</span><span class="code-tag">&gt;</span>
  <span class="code-tag">&lt;source</span> <span class="code-attr">src=</span><span class="code-value">"ä½ çš„MP3å¤–é“¾åœ°å€"</span> <span class="code-attr">type=</span><span class="code-value">"audio/mpeg"</span><span class="code-tag">&gt;</span>
<span class="code-tag">&lt;/audio&gt;</span></pre>
                    </div>
                </div>
            </div>
            <span class="label-tag">å¯è‡ªå®šä¹‰æ ·å¼</span>
        </div>

        <!-- ç¤ºä¾‹4 -->
        <div class="example-card">
            <h3 class="example-title">4. JavaScript æ§åˆ¶æ’­æ”¾</h3>
            <p class="example-desc">ä½¿ç”¨ JavaScript å®ç°è‡ªå®šä¹‰æ§åˆ¶æŒ‰é’®</p>
            
            <div class="example-content">
                <div class="preview-box">
                    <div style="text-align: center;">
                        <audio id="myAudio" style="display: none;">
                            <source src="https://mp3.xiaoyi.ink/uploads/1761628772676-y9isn78aunm.mp3" type="audio/mpeg">
                        </audio>
                        <button onclick="document.getElementById('myAudio').play()" style="padding: 12px 24px; margin: 0 8px; background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%); color: white; border: none; border-radius: 10px; cursor: pointer;">æ’­æ”¾</button>
                        <button onclick="document.getElementById('myAudio').pause()" style="padding: 12px 24px; margin: 0 8px; background: rgba(220, 38, 38, 0.1); color: #dc2626; border: 1px solid rgba(220, 38, 38, 0.2); border-radius: 10px; cursor: pointer;">æš‚åœ</button>
                    </div>
                </div>
                
                <div class="code-box">
                    <div class="code-header">
                        <span class="code-lang">HTML + JavaScript</span>
                        <button class="copy-btn" onclick="copyCode(this, 'code4')">å¤åˆ¶ä»£ç </button>
                    </div>
                    <div class="code-content">
                        <pre id="code4"><span class="code-tag">&lt;audio</span> <span class="code-attr">id=</span><span class="code-value">"myAudio"</span><span class="code-tag">&gt;</span>
  <span class="code-tag">&lt;source</span> <span class="code-attr">src=</span><span class="code-value">"ä½ çš„MP3å¤–é“¾åœ°å€"</span> <span class="code-attr">type=</span><span class="code-value">"audio/mpeg"</span><span class="code-tag">&gt;</span>
<span class="code-tag">&lt;/audio&gt;</span>

<span class="code-tag">&lt;button</span> <span class="code-attr">onclick=</span><span class="code-value">"document.getElementById('myAudio').play()"</span><span class="code-tag">&gt;</span>
  æ’­æ”¾
<span class="code-tag">&lt;/button&gt;</span>

<span class="code-tag">&lt;button</span> <span class="code-attr">onclick=</span><span class="code-value">"document.getElementById('myAudio').pause()"</span><span class="code-tag">&gt;</span>
  æš‚åœ
<span class="code-tag">&lt;/button&gt;</span></pre>
                    </div>
                </div>
            </div>
            <span class="label-tag">å®Œå…¨è‡ªå®šä¹‰æ§åˆ¶</span>
        </div>

        <!-- ç¤ºä¾‹5 -->
        <div class="example-card">
            <h3 class="example-title">5. é¢„åŠ è½½ä¼˜åŒ–</h3>
            <p class="example-desc">æ§åˆ¶éŸ³é¢‘é¢„åŠ è½½è¡Œä¸ºï¼Œä¼˜åŒ–é¡µé¢åŠ è½½é€Ÿåº¦</p>
            
            <div class="example-content">
                <div class="preview-box">
                    <div style="text-align: center; color: #666;">
                        <svg style="width: 64px; height: 64px; margin-bottom: 12px; opacity: 0.3;" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                        <p>ä¼˜åŒ–åŠ è½½æ€§èƒ½</p>
                    </div>
                </div>
                
                <div class="code-box">
                    <div class="code-header">
                        <span class="code-lang">HTML</span>
                        <button class="copy-btn" onclick="copyCode(this, 'code5')">å¤åˆ¶ä»£ç </button>
                    </div>
                    <div class="code-content">
                        <pre id="code5"><span class="code-comment">&lt;!-- ä¸é¢„åŠ è½½ --&gt;</span>
<span class="code-tag">&lt;audio</span> <span class="code-attr">controls</span> <span class="code-attr">preload=</span><span class="code-value">"none"</span><span class="code-tag">&gt;</span>
  <span class="code-tag">&lt;source</span> <span class="code-attr">src=</span><span class="code-value">"ä½ çš„MP3å¤–é“¾åœ°å€"</span> <span class="code-attr">type=</span><span class="code-value">"audio/mpeg"</span><span class="code-tag">&gt;</span>
<span class="code-tag">&lt;/audio&gt;</span>

<span class="code-comment">&lt;!-- é¢„åŠ è½½å…ƒæ•°æ® --&gt;</span>
<span class="code-tag">&lt;audio</span> <span class="code-attr">controls</span> <span class="code-attr">preload=</span><span class="code-value">"metadata"</span><span class="code-tag">&gt;</span>
  <span class="code-tag">&lt;source</span> <span class="code-attr">src=</span><span class="code-value">"ä½ çš„MP3å¤–é“¾åœ°å€"</span> <span class="code-attr">type=</span><span class="code-value">"audio/mpeg"</span><span class="code-tag">&gt;</span>
<span class="code-tag">&lt;/audio&gt;</span>

<span class="code-comment">&lt;!-- å®Œå…¨é¢„åŠ è½½ --&gt;</span>
<span class="code-tag">&lt;audio</span> <span class="code-attr">controls</span> <span class="code-attr">preload=</span><span class="code-value">"auto"</span><span class="code-tag">&gt;</span>
  <span class="code-tag">&lt;source</span> <span class="code-attr">src=</span><span class="code-value">"ä½ çš„MP3å¤–é“¾åœ°å€"</span> <span class="code-attr">type=</span><span class="code-value">"audio/mpeg"</span><span class="code-tag">&gt;</span>
<span class="code-tag">&lt;/audio&gt;</span></pre>
                    </div>
                </div>
            </div>
            <span class="label-tag">æ€§èƒ½ä¼˜åŒ–</span>
        </div>

        <!-- ç¤ºä¾‹6ï¼šåä¸½æ’­æ”¾å™¨ (å·²æ›´æ–°) -->
        <div class="example-card">
            <h3 class="example-title">6. ç»ˆæç‰ˆï¼šå¸¦æ­Œè¯å’ŒéŸ³é¢‘é¢‘è°±çš„æ’­æ”¾å™¨</h3>
            <p class="example-desc">åœ¨åŸç‰ˆåŸºç¡€ä¸Šï¼Œå¢åŠ LRCæ­Œè¯æ»šåŠ¨å’ŒåŠ¨æ€éŸ³é¢‘é¢‘è°±</p>
            
            <div class="example-content" style="grid-template-columns: 1fr;">
                <div class="player-preview">
                    <!-- æ¼‚æµ®èƒŒæ™¯ -->
                    <div class="hearts-bg">
                        <div class="heart"></div><div class="heart"></div><div class="heart"></div>
                        <div class="heart"></div><div class="heart"></div><div class="ribbon"></div>
                        <div class="ribbon"></div><div class="ribbon"></div><div class="ribbon"></div>
                    </div>
                    
                    <!-- æ’­æ”¾å™¨å®¹å™¨ -->
                    <div class="player-wrapper">
                        <!-- 
                          [MODIFIED] æ’­æ”¾å™¨ä¸»ä½“ç»“æ„å·²æ”¹å˜
                          ç°åœ¨æ˜¯ Flex å‚ç›´å¸ƒå±€
                        -->
                        <div class="luxury-player">
                            <!-- 
                              [MODIFIED] å¢åŠ äº† crossorigin="anonymous" 
                              è¿™æ˜¯å®ç°é¢‘è°±åˆ†æçš„å…³é”®ï¼
                              å¦‚æœä½ çš„MP3æœåŠ¡å™¨ä¸æ”¯æŒCORSï¼Œé¢‘è°±ä¼šå¤±è´¥ã€‚
                            -->
                            <audio id="luxuryAudio" src="https://mp3.xiaoyi.ink/uploads/1761628772676-y9isn78aunm.mp3" crossorigin="anonymous"></audio>
                            
                            <div class="player-toast" id="playerToast"></div>
                            
                            <!-- 
                              [NEW] åŒ…è£¹ å°é¢+æ§åˆ¶ çš„å®¹å™¨
                              (æ²¿ç”¨æ—§çš„ grid å¸ƒå±€)
                            -->
                            <div class="player-main-content">
                                <!-- å·¦ä¾§å°é¢ -->
                                <div class="album-cover-wrap">
                                    <div class="album-cover" id="albumCover">
                                        <img src="https://img.cdn1.vip/i/68fe356dbe35f_1761490285.webp" alt="ä¸“è¾‘å°é¢">
                                    </div>
                                </div>

                                <!-- å³ä¾§æ§åˆ¶ -->
                                <div class="player-right">
                                    <!-- [MODIFIED] æ­Œæ›²ä¿¡æ¯æ›´æ–° -->
                                    <div class="song-info">
                                        <h4>åæ–¹å‘çš„é’Ÿ</h4>
                                        <p>å‘¨æ°ä¼¦ (Jay Chou)</p>
                                    </div>

                                    <div class="progress-bar">
                                        <span class="time" id="currentTime">0:00</span>
                                        <div class="progress" id="progressTrack">
                                            <div class="progress-fill" id="progressFill"></div>
                                        </div>
                                        <span class="time" id="totalTime">0:00</span>
                                    </div>

                                    <div class="controls">
                                        <button class="control-btn" id="loopBtn" title="å¾ªç¯">
                                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                                <path d="M17 2l4 4-4 4M3 11V9a4 4 0 0 1 4-4h14M7 22l-4-4 4-4M21 13v2a4 4 0 0 1-4 4H3"/>
                                            </svg>
                                        </button>
                                        <button class="control-btn" id="backwardBtn" title="åé€€10ç§’">
                                            <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
                                                <path d="M11 18V6l-8.5 6 8.5 6zm.5-6l8.5 6V6l-8.5 6z"/>
                                            </svg>
                                        </button>
                                        <button class="control-btn play-btn" id="playBtn" title="æ’­æ”¾">
                                            <svg class="icon" id="playIcon" viewBox="0 0 24 24" fill="currentColor">
                                                <path d="M8 5v14l11-7z"/>
                                            </svg>
                                        </button>
                                        <button class="control-btn" id="forwardBtn" title="å¿«è¿›10ç§’">
                                            <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
                                                <path d="M4 18l8.5-6L4 6v12zm9-12v12l8.5-6L13 6z"/>
                                            </svg>
                                        </button>
                                        <button class="control-btn" id="volumeBtn" title="éŸ³é‡">
                                            <svg class="icon" id="volumeIcon" viewBox="0 0 24 24" fill="currentColor">
                                                <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 
                              [NEW] æ–°å¢æ­Œè¯å®¹å™¨ 
                            -->
                            <div class="lyrics-container">
                                <p id="lyricsLine">[ æ­Œè¯åŠ è½½ä¸­... ]</p>
                            </div>

                            <!-- 
                              [NEW] æ–°å¢é¢‘è°±ç”»å¸ƒ
                            -->
                            <div class="spectrum-container">
                                <canvas id="audioSpectrum"></canvas>
                            </div>
                            
                        </div>
                    </div>
                </div>

                <div class="code-box">
                    <div class="code-header">
                        <span class="code-lang">å®Œæ•´ä»£ç ï¼ˆæ­Œè¯+é¢‘è°±ç‰ˆï¼‰</span>
                        <button class="copy-btn" onclick="copyCode(this, 'code6')">å¤åˆ¶ä»£ç </button>
                    </div>
                    <div class="code-content">
                        <pre id="code6"><span class="code-comment">&lt;!-- 
  æ•™ç¨‹ï¼šè¿™æ˜¯â€œåä¸½æ’­æ”¾å™¨â€çš„ç»ˆæç‰ˆï¼ŒåŒ…å«äº†æ­Œè¯å’ŒéŸ³é¢‘é¢‘è°±ã€‚
  å¤åˆ¶æ‰€æœ‰ HTML, CSS, JavaScript åˆ°ä¸€ä¸ª .html æ–‡ä»¶ä¸­å³å¯è¿è¡Œã€‚
--&gt;</span>

<span class="code-comment">&lt;!-- 
  ç¬¬ä¸€éƒ¨åˆ†ï¼šHTML ç»“æ„ (æ’­æ”¾å™¨çš„éª¨æ¶)
  æˆ‘ä»¬æ›´æ–°äº†ç»“æ„ï¼Œåœ¨ å°é¢/æ§åˆ¶åŒº ä¸‹æ–¹å¢åŠ äº† æ­Œè¯åŒº å’Œ é¢‘è°±åŒº
--&gt;</span>
<span class="code-comment">&lt;!-- (å¯é€‰) æ¼”ç¤ºèƒŒæ™¯æ¿ --&gt;</span>
<span class="code-tag">&lt;div</span> <span class="code-attr">class=</span><span class="code-value">"player-preview"</span><span class="code-tag">&gt;</span>
  <span class="code-tag">&lt;div</span> <span class="code-attr">class=</span><span class="code-value">"player-wrapper"</span><span class="code-tag">&gt;</span>
      
      <span class="code-comment">&lt;!-- æ’­æ”¾å™¨ä¸»ä½“ (å¸ƒå±€å·²ä¿®æ”¹ä¸º flex-column) --&gt;</span>
      <span class="code-tag">&lt;div</span> <span class="code-attr">class=</span><span class="code-value">"luxury-player"</span><span class="code-tag">&gt;</span>
      
      <span class="code-comment">&lt;!-- 
        æ ¸å¿ƒ1ï¼šaudio æ ‡ç­¾
        !!! é‡å¤§å˜åŒ–ï¼šæ·»åŠ äº† crossorigin="anonymous"
        è¿™æ˜¯ä¸ºäº†è®©éŸ³é¢‘é¢‘è°±(Audio API)èƒ½å¤Ÿè·¨åŸŸè¯»å–éŸ³é¢‘æ•°æ®ã€‚
        å¦‚æœä½ çš„éŸ³é¢‘æœåŠ¡å™¨ä¸æ”¯æŒCORSï¼Œé¢‘è°±å°†æ— æ³•å·¥ä½œã€‚
        !!! æŠŠè¿™é‡Œçš„ src æ›¿æ¢æˆä½ è‡ªå·±çš„ MP3 å¤–é“¾ï¼
      --&gt;</span>
      <span class="code-tag">&lt;audio</span> <span class="code-attr">id=</span><span class="code-value">"luxuryAudio"</span> <span class="code-attr">src=</span><span class="code-value">"https://mp3.xiaoyi.ink/uploads/1761628772676-y9isn78aunm.mp3"</span> <span class="code-attr">crossorigin=</span><span class="code-value">"anonymous"</span><span class="code-tag">&gt;&lt;/audio&gt;</span>
      
      <span class="code-comment">&lt;!-- è¾…åŠ©ï¼šæç¤ºæ¡† --&gt;</span>
      <span class="code-tag">&lt;div</span> <span class="code-attr">class=</span><span class="code-value">"player-toast"</span> <span class="code-attr">id=</span><span class="code-value">"playerToast"</span><span class="code-tag">&gt;&lt;/div&gt;</span>
      
      <span class="code-comment">&lt;!-- [æ–°å¢] é¡¶éƒ¨å®¹å™¨ (å°é¢ + æ§åˆ¶) --&gt;</span>
      <span class="code-tag">&lt;div</span> <span class="code-attr">class=</span><span class="code-value">"player-main-content"</span><span class="code-tag">&gt;</span>
          <span class="code-comment">&lt;!-- å·¦ä¾§å°é¢ --&gt;</span>
          <span class="code-tag">&lt;div</span> <span class="code-attr">class=</span><span class="code-value">"album-cover-wrap"</span><span class="code-tag">&gt;</span>
              <span class="code-tag">&lt;div</span> <span class="code-attr">class=</span><span class="code-value">"album-cover"</span> <span class="code-attr">id=</span><span class="code-value">"albumCover"</span><span class="code-tag">&gt;</span>
                  <span class="code-comment">&lt;!-- !!! æ›¿æ¢ä¸ºä½ è‡ªå·±çš„å°é¢å›¾ç‰‡ --&gt;</span>
                  <span class="code-tag">&lt;img</span> <span class="code-attr">src=</span><span class="code-value">"https://img.cdn1.vip/i/68fe356dbe35f_1761490285.webp"</span> <span class="code-attr">alt=</span><span class="code-value">"ä¸“è¾‘å°é¢"</span><span class="code-tag">&gt;</span>
              <span class="code-tag">&lt;/div&gt;</span>
          <span class="code-tag">&lt;/div&gt;</span>

          <span class="code-comment">&lt;!-- å³ä¾§æ§åˆ¶ --&gt;</span>
          <span class="code-tag">&lt;div</span> <span class="code-attr">class=</span><span class="code-value">"player-right"</span><span class="code-tag">&gt;</span>
              <span class="code-comment">&lt;!-- æ­Œæ›²ä¿¡æ¯ (æ”¹æˆä½ çš„æ­Œåå’Œæ­Œæ‰‹) --&gt;</span>
              <span class="code-tag">&lt;div</span> <span class="code-attr">class=</span><span class="code-value">"song-info"</span><span class="code-tag">&gt;</span>
                  <span class="code-tag">&lt;h4&gt;</span>åæ–¹å‘çš„é’Ÿ<span class="code-tag">&lt;/h4&gt;</span>
                  <span class="code-tag">&lt;p&gt;</span>å‘¨æ°ä¼¦ (Jay Chou)<span class="code-tag">&lt;/p&gt;</span>
              <span class="code-tag">&lt;/div&gt;</span>

              <span class="code-comment">&lt;!-- è¿›åº¦æ¡ --&gt;</span>
              <span class="code-tag">&lt;div</span> <span class="code-attr">class=</span><span class="code-value">"progress-bar"</span><span class="code-tag">&gt;</span>
                  <span class="code-tag">&lt;span</span> <span class="code-attr">class=</span><span class="code-value">"time"</span> <span class="code-attr">id=</span><span class="code-value">"currentTime"</span><span class="code-tag">&gt;</span>0:00<span class="code-tag">&lt;/span&gt;</span>
                  <span class="code-tag">&lt;div</span> <span class="code-attr">class=</span><span class="code-value">"progress"</span> <span class="code-attr">id=</span><span class="code-value">"progressTrack"</span><span class="code-tag">&gt;</span>
                      <span class="code-tag">&lt;div</span> <span class="code-attr">class=</span><span class="code-value">"progress-fill"</span> <span class="code-attr">id=</span><span class="code-value">"progressFill"</span><span class="code-tag">&gt;&lt;/div&gt;</span>
                  <span class="code-tag">&lt;/div&gt;</span>
                  <span class="code-tag">&lt;span</span> <span class="code-attr">class=</span><span class="code-value">"time"</span> <span class="code-attr">id=</span><span class="code-value">"totalTime"</span><span class="code-tag">&gt;</span>0:00<span class="code-tag">&lt;/span&gt;</span>
              <span class="code-tag">&lt;/div&gt;</span>

              <span class="code-comment">&lt;!-- æ§åˆ¶æŒ‰é’® --&gt;</span>
              <span class="code-tag">&lt;div</span> <span class="code-attr">class=</span><span class="code-value">"controls"</span><span class="code-tag">&gt;</span>
                  <span class="code-tag">&lt;button</span> <span class="code-attr">class=</span><span class="code-value">"control-btn"</span> <span class="code-attr">id=</span><span class="code-value">"loopBtn"</span> <span class="code-attr">title=</span><span class="code-value">"å¾ªç¯"</span><span class="code-tag">&gt;</span>...<span class="code-tag">&lt;/button&gt;</span>
                  <span class="code-tag">&lt;button</span> <span class="code-attr">class=</span><span class="code-value">"control-btn"</span> <span class="code-attr">id=</span><span class="code-value">"backwardBtn"</span> <span class="code-attr">title=</span><span class="code-value">"åé€€10ç§’"</span><span class="code-tag">&gt;</span>...<span class="code-tag">&lt;/button&gt;</span>
                  <span class="code-tag">&lt;button</span> <span class="code-attr">class=</span><span class="code-value">"control-btn play-btn"</span> <span class="code-attr">id=</span><span class="code-value">"playBtn"</span> <span class="code-attr">title=</span><span class="code-value">"æ’­æ”¾"</span><span class="code-tag">&gt;</span>...<span class="code-tag">&lt;/button&gt;</span>
                  <span class="code-tag">&lt;button</span> <span class="code-attr">class=</span><span class="code-value">"control-btn"</span> <span class="code-attr">id=</span><span class="code-value">"forwardBtn"</span> <span class="code-attr">title=</span><span class="code-value">"å¿«è¿›10ç§’"</span><span class="code-tag">&gt;</span>...<span class="code-tag">&lt;/button&gt;</span>
                  <span class="code-tag">&lt;button</span> <span class="code-attr">class=</span><span class="code-value">"control-btn"</span> <span class="code-attr">id=</span><span class="code-value">"volumeBtn"</span> <span class="code-attr">title=</span><span class="code-value">"éŸ³é‡"</span><span class="code-tag">&gt;</span>...<span class="code-tag">&lt;/button&gt;</span>
              <span class="code-tag">&lt;/div&gt;</span>
          <span class="code-tag">&lt;/div&gt;</span>
      <span class="code-tag">&lt;/div&gt;</span> <span class="code-comment">&lt;!-- ç»“æŸ .player-main-content --&gt;</span>

      <span class="code-comment">&lt;!-- 
        [æ–°å¢] æ­Œè¯å®¹å™¨ 
      --&gt;</span>
      <span class="code-tag">&lt;div</span> <span class="code-attr">class=</span><span class="code-value">"lyrics-container"</span><span class="code-tag">&gt;</span>
          <span class="code-tag">&lt;p</span> <span class="code-attr">id=</span><span class="code-value">"lyricsLine"</span><span class="code-tag">&gt;</span>[ æ­Œè¯åŠ è½½ä¸­... ]<span class="code-tag">&lt;/p&gt;</span>
      <span class="code-tag">&lt;/div&gt;</span>

      <span class="code-comment">&lt;!-- 
        [æ–°å¢] éŸ³é¢‘é¢‘è°±ç”»å¸ƒ (Canvas)
        JS å°†åœ¨è¿™é‡Œç»˜åˆ¶å›¾å½¢
      --&gt;</span>
      <span class="code-tag">&lt;div</span> <span class="code-attr">class=</span><span class="code-value">"spectrum-container"</span><span class="code-tag">&gt;</span>
          <span class="code-tag">&lt;canvas</span> <span class="code-attr">id=</span><span class="code-value">"audioSpectrum"</span><span class="code-tag">&gt;&lt;/canvas&gt;</span>
      <span class="code-tag">&lt;/div&gt;</span>
      
      <span class="code-tag">&lt;/div&gt;</span> <span class="code-comment">&lt;!-- ç»“æŸ .luxury-player --&gt;</span>
  <span class="code-tag">&lt;/div&gt;</span>
<span class="code-tag">&lt;/div&gt;</span>


<span class="code-comment">&lt;!-- 
  ç¬¬äºŒéƒ¨åˆ†ï¼šCSS æ ·å¼ (æ’­æ”¾å™¨çš„çš®è‚¤)
  æˆ‘ä»¬æ›´æ–°äº† .luxury-player çš„å¸ƒå±€ï¼Œå¹¶å¢åŠ äº† .lyrics-container å’Œ .spectrum-container çš„æ ·å¼
--&gt;</span>
<span class="code-tag">&lt;style&gt;</span>
  <span class="code-comment">/* ... (çœç•¥äº† body, .player-preview, .hearts-bg ç­‰æœªä¿®æ”¹çš„æ ·å¼) ... */</span>

  <span class="code-comment">/* [MODIFIED] æ’­æ”¾å™¨ä¸»ä½“å¸ƒå±€ä¿®æ”¹
    ä» 2åˆ—grid æ”¹ä¸º flex-columnï¼Œä»¥å®¹çº³ å°é¢/æ§åˆ¶ + æ­Œè¯ + é¢‘è°± 
  */</span>
  .luxury-player {
      max-width: 550px; 
      width: 100%;      
      margin: 0 auto;
      background: #ffffff; 
      border-radius: 24px; 
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); 
      padding: 24px;
      display: flex;
      flex-direction: column;
      gap: 20px; <span class="code-comment">/* é¡¶éƒ¨/æ­Œè¯/é¢‘è°±ä¹‹é—´çš„é—´è· */</span>
  }
  
  <span class="code-comment">/* [NEW] æ–°å¢ä¸€ä¸ªå®¹å™¨åŒ…è£¹ å°é¢+æ§åˆ¶
    æ²¿ç”¨ä¹‹å‰çš„ 2åˆ—grid å¸ƒå±€
  */</span>
  .player-main-content {
      display: grid;
      grid-template-columns: 140px 1fr;
      gap: 24px;
      align-items: center;
  }

  <span class="code-comment">/* ... (çœç•¥äº† .album-cover, .player-right, .controls ç­‰æœªä¿®æ”¹çš„æ ·å¼) ... */</span>

  <span class="code-comment">/* [NEW] æ–°å¢ï¼šæ­Œè¯å®¹å™¨æ ·å¼
  */</span>
  .lyrics-container {
      width: 100%;
      height: 2.4em; <span class="code-comment">/* é™åˆ¶é«˜åº¦ä¸ºä¸€è¡ŒåŠå·¦å³ */</span>
      line-height: 1.2em;
      text-align: center;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
  }

  #lyricsLine {
      margin: 0;
      font-size: 15px;
      font-weight: 500;
      color: #333;
      transition: opacity 0.2s ease; <span class="code-comment">/* æ·¡å…¥æ·¡å‡º */</span>
  }

  <span class="code-comment">/* [NEW] æ–°å¢ï¼šé¢‘è°±å®¹å™¨æ ·å¼
  */</span>
  .spectrum-container {
      width: 100%;
      height: 70px; <span class="code-comment">/* é¢‘è°±é«˜åº¦ */</span>
      background: #f4f4f4;
      border-radius: 10px;
      overflow: hidden;
  }

  #audioSpectrum {
      width: 100%;
      height: 100%;
      display: block;
  }

  <span class="code-comment">/* [MODIFIED] å“åº”å¼è°ƒæ•´ */</span>
  @media (max-width: 420px) {
      .player-main-content {
          grid-template-columns: 1fr; <span class="code-comment">/* å˜ä¸ºå•åˆ— */</span>
          gap: 20px;
      }
      .album-cover-wrap {
          width: 120px;
          height: 120px;
          margin: 0 auto;
      }
      .player-right {
          min-height: auto;
          gap: 16px;
          align-items: center;
      }
      .song-info { text-align: center; }
      .progress-bar { width: 100%; }
      .controls { justify-content: center; }

      <span class="code-comment">/* [NEW] è°ƒæ•´æ­Œè¯å’Œé¢‘è°± */</span>
      .lyrics-container { height: 2.4em; }
      #lyricsLine { font-size: 14px; }
      .spectrum-container { height: 60px; }
  }
<span class="code-tag">&lt;/style&gt;</span>


<span class="code-comment">&lt;!-- 
  ç¬¬ä¸‰éƒ¨åˆ†ï¼šJavaScript é€»è¾‘ (æ’­æ”¾å™¨çš„å¤§è„‘)
  è¿™æ˜¯æ”¹åŠ¨æœ€å¤§çš„åœ°æ–¹ï¼æˆ‘ä»¬å¢åŠ äº†æ­Œè¯è§£æå’Œ Web Audio API
--&gt;</span>
<span class="code-tag">&lt;script&gt;</span>
  <span class="code-comment">// === 1. è·å–æ‰€æœ‰éœ€è¦æ“ä½œçš„ HTML å…ƒç´  ===
  // (æ³¨æ„ï¼šè¿™é‡Œæˆ‘ä»¬åªå±•ç¤ºâ€œåä¸½æ’­æ”¾å™¨â€çš„JS)
  // (ä¸ºäº†é˜²æ­¢å’Œé¡µé¢ä¸Šå…¶ä»–JSå†²çªï¼Œæˆ‘ä»¬æŠŠæ‰€æœ‰å˜é‡
  //  åŒ…è£¹åœ¨ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•° (IIFE) ä¸­ï¼Œ
  //  ä½†å®é™…å¤åˆ¶ä½¿ç”¨æ—¶ï¼Œä½ ä¸éœ€è¦è¿™ä¸ªå¤–å±‚åŒ…è£¹)
  */</span>
  <span class="code-comment">// (function() { // å®é™…ä½¿ç”¨æ—¶ä¸éœ€è¦è¿™å±‚</span>
  
      <span class="code-comment">// --- åŸæœ‰å…ƒç´  ---
      // (ä¸ºäº†é˜²æ­¢ä¸å…¨å±€è„šæœ¬å†²çªï¼ŒçœŸå®æ•™ç¨‹ä»£ç å—ä¸­åº”è·å–æ–°çš„)
      // (åœ¨å½“å‰é¡µé¢æ¼”ç¤ºä¸­ï¼Œæˆ‘ä»¬å¤ç”¨å…¨å±€çš„)
      /*
      const audio = document.getElementById('luxuryAudio');
      const albumCover = document.getElementById('albumCover');
      const playIcon = document.getElementById('playIcon');
      const toast = document.getElementById('playerToast');
      const progressFill = document.getElementById('progressFill');
      const currentTime = document.getElementById('currentTime');
      const totalTime = document.getElementById('totalTime');
      const progressTrack = document.getElementById('progressTrack');
      const loopBtn = document.getElementById('loopBtn');
      const volumeBtn = document.getElementById('volumeBtn');
      */</span>

      <span class="code-comment">// --- [æ–°å¢] æ­Œè¯å’Œé¢‘è°±ç›¸å…³å…ƒç´  ---
      const lyricsLine = document.getElementById('lyricsLine');
      const canvas = document.getElementById('audioSpectrum');
      const canvasCtx = canvas.getContext('2d');

      <span class="code-comment">// --- [æ–°å¢] æ­Œè¯æ•°æ® ---
      const lrcString = `[00:00.00]åæ–¹å‘çš„é’Ÿ - å‘¨æ°ä¼¦ (Jay Chou)
[00:04.32]è¯ï¼šæ–¹æ–‡å±±
[00:08.64]æ›²ï¼šå‘¨æ°ä¼¦
[00:12.96]ç¼–æ›²ï¼šå‘¨æ°ä¼¦
[00:17.28]åˆå£°ï¼šå‘¨æ°ä¼¦
[00:21.61]åˆå£°ç¼–å†™ï¼šå‘¨æ°ä¼¦
[00:25.93]ã„…ã„†ã„‡ã„ˆã„‰ã„Šã„‹ã„Œã„ã„ã„
[00:30.90]ã„…ã„†ã„‡ã„ˆã„‰ã„Šã„‹ã„Œã„ã„ã„ã„
[00:35.93]ã„…ã„†ã„‡ã„ˆã„‰ã„Šã„‹ã„Œã„ã„ã„
[00:41.02]ã„…ã„†ã„‡ã„ˆã„‰ã„Šã„‹ã„Œ
[00:45.85]è¿·è¿·è’™è’™ ä½ ç»™çš„æ¢¦
[00:48.36]å‡ºç°è£‚ç¼ éšéšä½œç—›
[00:50.93]æ€ä¹ˆæ²Ÿé€šä½ éƒ½æ²¡ç©º
[00:53.38]è¯´æˆ‘ä¸æ‡‚ è¯´äº†æ²¡ç”¨
[00:55.99]ä»–çš„ç¬‘å®¹ æœ‰ä½•ä¸åŒ
[00:58.53]åœ¨ä½ å¿ƒä¸­ æˆ‘ä¸å†å—å® 
[01:01.18]æˆ‘çš„å¤©ç©º æ˜¯é›¨æ˜¯é£ è¿˜æ˜¯å½©è™¹
[01:04.87]ä½ åœ¨æ“çºµ
[01:06.77]æ¨è‡ªå·±çœŸçš„æ²¡ç”¨æƒ…ç»ªæ¿€åŠ¨
[01:11.82]ä¸€é¢—å¿ƒåˆ°ç°åœ¨è¿˜åœ¨æŠ½ç—›
[01:16.62]è¿˜ä¸ºåˆ†æ‰‹å‰é‚£å¥æŠ±æ­‰åœ¨æ„ŸåŠ¨
[01:26.68]ç©¿æ¢­æ—¶é—´çš„ç”»é¢çš„é’Ÿ
[01:31.72]ä»åæ–¹å‘ å¼€å§‹ç§»åŠ¨
[01:36.84]å›åˆ°å½“åˆçˆ±ä½ çš„æ—¶ç©º
[01:41.93]åœæ ¼å†…å®¹ ä¸å¿ 
[01:46.91]æ‰€æœ‰å›å¿†å¯¹ç€æˆ‘è¿›æ”»
[01:52.05]æˆ‘çš„ä¼¤å£ è¢«ä½ æ‹†å°
[01:57.15]èª“è¨€å¤ªæ²‰é‡æ³ªè¢«çºµå®¹
[02:02.17]è„¸ä¸Šæ±¹æ¶Œ å¤±æ§
[02:17.39]åŸå¸‚éœ“è™¹ ä¸å®‰è·³åŠ¨
[02:18.74]æŸ“çº¢å¤œç©º è¿‡å»ç§ç§
[02:20.20]åƒä¸€åœºæ¢¦ ä¸æ•¢å»ç¢°
[02:21.59]ä¸€æƒ³å°±ç—› å¿ƒç¢å†…å®¹
[02:22.86]æ¯ä¸€ç§’é’Ÿ éƒ½æœ‰ä¸åŒ
[02:24.17]ä½ ä¸æ‡‚ è¿ä¸€å¥çé‡
[02:25.69]ä¹Ÿæœ‰è‹¦è¡· ä¹Ÿä¸æƒ³é€
[02:27.13]å¯’é£ä¸­ åºŸå¢ŸçƒŸå›±
[02:28.24]åœæ­¢è½¬åŠ¨ ä¸€åˆ‡è½ç©º
[02:29.60]åœ¨äººæµ·ä¸­ç›²ç›®è·Ÿä»
[02:31.08]åˆ«äººçš„æ¢¦ å…¨é¢æ”¾çºµ
[02:32.44]æ¨æ²¡æœ‰ç”¨ ç–—ä¼¤æ­¢ç—›
[02:33.67]ä¸å†æ„ŸåŠ¨ æ²¡æœ‰æ¢¦
[02:35.05]ç—›ä¸çŸ¥è½»é‡
[02:35.83]æ³ªæ°´é²œçº¢ å…¨é¢æ”¾çºµ
[02:48.14]æ¨è‡ªå·±çœŸçš„æ²¡ç”¨æƒ…ç»ªæ¿€åŠ¨
[02:53.29]ä¸€é¢—å¿ƒåˆ°ç°åœ¨è¿˜åœ¨æŠ½ç—›
[02:58.02]è¿˜ä¸ºåˆ†æ‰‹å‰é‚£å¥æŠ±æ­‰åœ¨æ„ŸåŠ¨
[03:08.19]ç©¿æ¢­æ—¶é—´çš„ç”»é¢çš„é’Ÿ
[03:13.22]ä»åæ–¹å‘ å¼€å§‹ç§»åŠ¨
[03:18.32]å›åˆ°å½“åˆçˆ±ä½ çš„æ—¶ç©º
[03:23.33]åœæ ¼å†…å®¹ ä¸å¿ 
[03:28.46]æ‰€æœ‰å›å¿†å¯¹ç€æˆ‘è¿›æ”»
[03:33.52]æˆ‘çš„ä¼¤å£ è¢«ä½ æ‹†å°
[03:38.58]èª“è¨€å¤ªæ²‰é‡æ³ªè¢«çºµå®¹
[03:43.67]è„¸ä¸Šæ±¹æ¶Œ å¤±æ§
[03:48.72]ç©¿æ¢­æ—¶é—´çš„ç”»é¢çš„é’Ÿ
[03:53.78]ä»åæ–¹å‘ å¼€å§‹ç§»åŠ¨
[03:58.84]å›åˆ°å½“åˆçˆ±ä½ çš„æ—¶ç©º
[04:03.96]åœæ ¼å†…å®¹ ä¸å¿ 
[04:09.00]æ‰€æœ‰å›å¿†å¯¹ç€æˆ‘è¿›æ”»`;
      
      let lrcData = []; <span class="code-comment">// å­˜æ”¾è§£æåçš„æ­Œè¯å¯¹è±¡æ•°ç»„</span>
      let currentLrcIndex = -1; <span class="code-comment">// å½“å‰æ­Œè¯è¡Œç´¢å¼•</span>

      <span class="code-comment">// --- [æ–°å¢] éŸ³é¢‘ API å˜é‡ ---
      let audioContext;
      let analyser;
      let sourceNode;
      let dataArray;
      let isAudioAPIInit = false; <span class="code-comment">// ç¡®ä¿åªåˆå§‹åŒ–ä¸€æ¬¡</span>
      let bufferLength;

      <span class="code-comment">// === 2. å°è£…å¸¸ç”¨åŠŸèƒ½å‡½æ•° ===</span>
      
      <span class="code-comment">// (å·²æœ‰ showToast, formatTime å‡½æ•°...æ­¤å¤„çœç•¥)</span>
      
      <span class="code-comment">/**
       * [æ–°å¢] LRC æ­Œè¯è§£æå‡½æ•°
       * @param {string} lrc - åŸå§‹LRCå­—ç¬¦ä¸²
       * @returns {Array} è§£æåçš„å¯¹è±¡æ•°ç»„
       */</span>
      function parseLRC(lrc) {
          const lines = lrc.split('\n');
          const result = [];
          const timeRegex = /\[(\d{2}):(\d{2})\.(\d{2,3})\](.*)/;

          for (const line of lines) {
              const match = line.match(timeRegex);
              if (match) {
                  const minutes = parseInt(match[1], 10);
                  const seconds = parseInt(match[2], 10);
                  const milliseconds = parseInt(match[3].padEnd(3, '0'), 10);
                  const time = minutes * 60 + seconds + milliseconds / 1000;
                  const text = match[4].trim() || '...'; <span class="code-comment">// å¤„ç†ç©ºæ­Œè¯</span>
                  result.push({ time, text });
              }
          }
          <span class="code-comment">// æŒ‰æ—¶é—´æ’åºï¼Œç¡®ä¿æ­Œè¯é¡ºåºæ­£ç¡®</span>
          return result.sort((a, b) => a.time - b.time);
      }

      <span class="code-comment">/**
       * [æ–°å¢] æ›´æ–°æ­Œè¯å‡½æ•°
       * @param {number} currentTime - éŸ³é¢‘å½“å‰æ’­æ”¾æ—¶é—´ (ç§’)
       */</span>
      function updateLyrics(currentTime) {
          if (!lrcData.length) return;

          <span class="code-comment">// å¯»æ‰¾å½“å‰åº”è¯¥é«˜äº®çš„è¡Œ</span>
          let newIndex = -1;
          for (let i = 0; i < lrcData.length; i++) {
              if (currentTime >= lrcData[i].time) {
                  newIndex = i;
              } else {
                  break; <span class="code-comment">// å› ä¸ºå·²æ’åºï¼Œåé¢çš„éƒ½ä¸ç¬¦</span>
              }
          }

          if (newIndex !== currentLrcIndex) {
              currentLrcIndex = newIndex;
              const newText = lrcData[currentLrcIndex] ? lrcData[currentLrcIndex].text : '&nbsp;';
              
              <span class="code-comment">// ç®€å•çš„æ·¡å…¥æ·¡å‡ºæ•ˆæœ</span>
              lyricsLine.style.opacity = 0;
              setTimeout(() => {
                  lyricsLine.innerHTML = newText;
                  lyricsLine.style.opacity = 1;
              }, 150); <span class="code-comment">// 150ms ååˆ‡æ¢</span>
          }
      }

      <span class="code-comment">/**
       * [æ–°å¢] åˆå§‹åŒ–éŸ³é¢‘ API (é¢‘è°±)
       * å¿…é¡»åœ¨ç”¨æˆ·äº¤äº’ï¼ˆå¦‚ç‚¹å‡»ï¼‰åè°ƒç”¨
       */</span>
      function initAudioAPI() {
          if (isAudioAPIInit) return; <span class="code-comment">// é˜²æ­¢é‡å¤åˆå§‹åŒ–</span>

          try {
              audioContext = new (window.AudioContext || window.webkitAudioContext)();
              
              <span class="code-comment">// 1. åˆ›å»ºåˆ†æå™¨</span>
              analyser = audioContext.createAnalyser();
              analyser.fftSize = 256; <span class="code-comment">// é¢‘åŸŸç‚¹æ•° (å¿…é¡»æ˜¯2çš„å¹‚)</span>
              bufferLength = analyser.frequencyBinCount; <span class="code-comment">// = fftSize / 2</span>
              dataArray = new Uint8Array(bufferLength); <span class="code-comment">// å­˜æ”¾é¢‘ç‡æ•°æ®çš„æ•°ç»„</span>

              <span class="code-comment">// 2. åˆ›å»ºéŸ³é¢‘æº (!!! ä¾èµ– <audio> ä¸Šçš„ crossorigin="anonymous")</span>
              sourceNode = audioContext.createMediaElementSource(document.getElementById('luxuryAudio'));

              <span class="code-comment">// 3. è¿æ¥èŠ‚ç‚¹ï¼š éŸ³é¢‘æº -> åˆ†æå™¨ -> æ‰¬å£°å™¨</span>
              sourceNode.connect(analyser);
              analyser.connect(audioContext.destination);

              isAudioAPIInit = true;
              
              <span class="code-comment">// 4. è®¾ç½®ç”»å¸ƒå¤§å°å¹¶å¼€å§‹ç»˜åˆ¶</span>
              resizeCanvas();
              drawSpectrum();
              
          } catch (e) {
              console.error('åˆå§‹åŒ–éŸ³é¢‘é¢‘è°±å¤±è´¥ (å¯èƒ½æ˜¯CORSé—®é¢˜):', e);
              lyricsLine.innerHTML = '[ éŸ³é¢‘é¢‘è°±åŠ è½½å¤±è´¥ ]';
          }
      }
      
      <span class="code-comment">/**
       * [æ–°å¢] ç”»å¸ƒå°ºå¯¸è°ƒæ•´ (å¤„ç†é«˜DPIå±å¹•)
       */</span>
      function resizeCanvas() {
          canvas.width = canvas.offsetWidth * window.devicePixelRatio;
          canvas.height = canvas.offsetHeight * window.devicePixelRatio;
      }
      
      <span class="code-comment">// ç›‘å¬çª—å£å¤§å°å˜åŒ–ï¼Œé‡è®¾ç”»å¸ƒ</span>
      window.addEventListener('resize', resizeCanvas);


      <span class="code-comment">/**
       * [æ–°å¢] ç»˜åˆ¶é¢‘è°±å‡½æ•° (åŠ¨ç”»å¾ªç¯)
       */</span>
      function drawSpectrum() {
          <span class="code-comment">// å¾ªç¯è°ƒç”¨è‡ªèº«ï¼Œåˆ›å»ºåŠ¨ç”»</span>
          requestAnimationFrame(drawSpectrum);

          if (!isAudioAPIInit || !analyser) return;

          <span class="code-comment">// 1. è·å–å½“å‰å¸§çš„é¢‘ç‡æ•°æ®</span>
          analyser.getByteFrequencyData(dataArray);

          <span class="code-comment">// 2. æ¸…ç©ºç”»å¸ƒ</span>
          canvasCtx.clearRect(0, 0, canvas.width, canvas.height);

          const barWidth = (canvas.width / bufferLength) * 1.2;
          let x = 0;

          <span class="code-comment">// 3. åˆ›å»ºæ¸å˜è‰² (åŒ¹é…è¿›åº¦æ¡)</span>
          const gradient = canvasCtx.createLinearGradient(0, 0, 0, canvas.height);
          gradient.addColorStop(0, '#764ba2'); <span class="code-comment">// é¡¶éƒ¨é¢œè‰²</span>
          gradient.addColorStop(1, '#667eea'); <span class="code-comment">// åº•éƒ¨é¢œè‰²
          canvasCtx.fillStyle = gradient;

          <span class="code-comment">// 4. å¾ªç¯ç»˜åˆ¶æ¯ä¸€æ ¹æŸ±å­</span>
          for (let i = 0; i < bufferLength; i++) {
              <span class="code-comment">// dataArray[i] æ˜¯ 0-255 çš„å€¼, è½¬æ¢æˆé«˜åº¦</span>
              const barHeight = (dataArray[i] / 255) * canvas.height;
              
              <span class="code-comment">// (x, y, width, height)</span>
              canvasCtx.fillRect(
                  x, 
                  canvas.height - barHeight, <span class="code-comment">// ä»åº•éƒ¨å¼€å§‹ç”»</span>
                  barWidth, 
                  barHeight
              );

              x += barWidth + 1; <span class="code-comment">// æŸ±å­é—´è·</span>
          }
      }

      <span class="code-comment">// === 3. ç»‘å®šäº‹ä»¶ç›‘å¬ (éƒ¨åˆ†ä¿®æ”¹) ===</span>

      <span class="code-comment">// --- [MODIFIED] æ’­æ”¾/æš‚åœ æ ¸å¿ƒåŠŸèƒ½ ---</span>
      document.getElementById('playBtn').addEventListener('click', () => {
          <span class="code-comment">// !!! å…³é”®ï¼šåœ¨ç”¨æˆ·é¦–æ¬¡ç‚¹å‡»æ—¶åˆå§‹åŒ– Audio API</span>
          if (!isAudioAPIInit) {
              initAudioAPI();
          }
          
          <span class="code-comment">// (ä¿®å¤ AudioContext åœ¨æŸäº›æµè§ˆå™¨çš„è‡ªåŠ¨æš‚åœç­–ç•¥)</span>
          if (audioContext && audioContext.state === 'suspended') {
              audioContext.resume();
          }
          
          const audio = document.getElementById('luxuryAudio');
          if (audio.paused) {
              audio.play();
              document.getElementById('albumCover').classList.add('playing');
              document.getElementById('playIcon').innerHTML = '&lt;rect x="6" y="4" width="4" height="16"/&gt;&lt;rect x="14" y="4" width="4" height="16"/&gt;';
              showToast('æ­£åœ¨æ’­æ”¾');
          } else {
              audio.pause();
              document.getElementById('albumCover').classList.remove('playing');
              document.getElementById('playIcon').innerHTML = '&lt;path d="M8 5v14l11-7z"/&gt;';
              showToast('å·²æš‚åœ');
          }
      });
      
      <span class="code-comment">// --- (å…¶ä»–æŒ‰é’®äº‹ä»¶... æ­¤å¤„çœç•¥) ---</span>

      <span class="code-comment">// --- [MODIFIED] ç›‘å¬ audio æ’­æ”¾è¿›åº¦ ---</span>
      document.getElementById('luxuryAudio').addEventListener('timeupdate', () => {
          const audio = document.getElementById('luxuryAudio');
          const progress = (audio.currentTime / audio.duration) * 100;
          document.getElementById('progressFill').style.width = progress + '%';
          document.getElementById('currentTime').textContent = formatTime(audio.currentTime);

          <span class="code-comment">// === [æ–°å¢] è°ƒç”¨æ­Œè¯æ›´æ–° ===</span>
          updateLyrics(audio.currentTime);
      });

      <span class="code-comment">// --- (loadedmetadata, progressTrack äº‹ä»¶... æ­¤å¤„çœç•¥) ---</span>

      <span class="code-comment">// === 4. [æ–°å¢] é¡µé¢åŠ è½½åç«‹å³æ‰§è¡Œ ===
      
      <span class="code-comment">// 1. è§£ææ­Œè¯</span>
      lrcData = parseLRC(lrcString);
      lyricsLine.innerHTML = lrcData.length > 0 ? lrcData[0].text : 'æ­Œè¯åŠ è½½å®Œæ¯•';

      <span class="code-comment">// 2. è°ƒæ•´ç”»å¸ƒåˆå§‹å¤§å° (åœ¨ API åˆå§‹åŒ–æ—¶ä¹Ÿä¼šè°ƒç”¨)</span>
      <span class="code-comment">// resizeCanvas();
      
  <span class="code-comment">// })(); // å®é™…ä½¿ç”¨æ—¶ä¸éœ€è¦è¿™å±‚</span>
<span class="code-tag">&lt;/script&gt;</span></pre>
                    </div>
                </div>
            </div>
            <span class="label-tag">ç»ˆæç‰ˆ - å¼€ç®±å³ç”¨</span>
        </div>
    </div>

    <script>
        // (å…¨å±€è„šæœ¬)
        // ä¸ºäº†è®©é¡µé¢ä¸Šçš„æ‰€æœ‰ç¤ºä¾‹éƒ½èƒ½å·¥ä½œï¼Œ
        // æˆ‘ä»¬éœ€è¦ç¡®ä¿å‡½æ•°å’Œå˜é‡ä¸ä¼šç›¸äº’å†²çªã€‚
        // ç¬¬6åŒºçš„è„šæœ¬è¢«ç‰¹åˆ«å°è£…å’Œä¿®æ”¹ï¼Œä»¥åŒ…å«æ–°åŠŸèƒ½ã€‚

        // --- ç¤ºä¾‹1-5 å’Œ å¤åˆ¶ä»£ç  åŠŸèƒ½ ---
        function copyCode(btn, codeId) {
            const codeEl = document.getElementById(codeId);
            let code = codeEl.textContent || codeEl.innerText;
            navigator.clipboard.writeText(code).then(() => {
                const originalText = btn.textContent;
                btn.textContent = 'å·²å¤åˆ¶';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            }).catch(err => {
                console.error('å¤åˆ¶å¤±è´¥: ', err);
            });
        }
        
        // --- ç¤ºä¾‹ 6 (åä¸½æ’­æ”¾å™¨) çš„ä¸“å±è„šæœ¬ ---
        
        // æˆ‘ä»¬å°†ç¬¬6åŒºçš„æ‰€æœ‰é€»è¾‘åŒ…è£¹èµ·æ¥ï¼Œé˜²æ­¢æ±¡æŸ“å…¨å±€
        (function() {
            // è·å–ç¬¬6åŒºä¸“å±çš„å…ƒç´ 
            const audio = document.getElementById('luxuryAudio');
            if (!audio) return; // å¦‚æœä¸åœ¨è¿™ä¸ªé¡µé¢ï¼Œåˆ™é€€å‡º
            
            const albumCover = document.getElementById('albumCover');
            const playIcon = document.getElementById('playIcon');
            const toast = document.getElementById('playerToast');
            const progressFill = document.getElementById('progressFill');
            const currentTime = document.getElementById('currentTime');
            const totalTime = document.getElementById('totalTime');
            const progressTrack = document.getElementById('progressTrack');
            const loopBtn = document.getElementById('loopBtn');
            const volumeBtn = document.getElementById('volumeBtn');
            
            // --- [æ–°å¢] æ­Œè¯å’Œé¢‘è°±ç›¸å…³å…ƒç´  ---
            const lyricsLine = document.getElementById('lyricsLine');
            const canvas = document.getElementById('audioSpectrum');
            const canvasCtx = canvas.getContext('2d');

            // --- [æ–°å¢] æ­Œè¯æ•°æ® ---
            const lrcString = `[00:00.00]åæ–¹å‘çš„é’Ÿ - å‘¨æ°ä¼¦ (Jay Chou)
[00:04.32]è¯ï¼šæ–¹æ–‡å±±
[00:08.64]æ›²ï¼šå‘¨æ°ä¼¦
[00:12.96]ç¼–æ›²ï¼šå‘¨æ°ä¼¦
[00:17.28]åˆå£°ï¼šå‘¨æ°ä¼¦
[00:21.61]åˆå£°ç¼–å†™ï¼šå‘¨æ°ä¼¦
[00:25.93]ã„…ã„†ã„‡ã„ˆã„‰ã„Šã„‹ã„Œã„ã„ã„
[00:30.90]ã„…ã„†ã„‡ã„ˆã„‰ã„Šã„‹ã„Œã„ã„ã„ã„
[00:35.93]ã„…ã„†ã„‡ã„ˆã„‰ã„Šã„‹ã„Œã„ã„ã„
[00:41.02]ã„…ã„†ã„‡ã„ˆã„‰ã„Šã„‹ã„Œ
[00:45.85]è¿·è¿·è’™è’™ ä½ ç»™çš„æ¢¦
[00:48.36]å‡ºç°è£‚ç¼ éšéšä½œç—›
[00:50.93]æ€ä¹ˆæ²Ÿé€šä½ éƒ½æ²¡ç©º
[00:53.38]è¯´æˆ‘ä¸æ‡‚ è¯´äº†æ²¡ç”¨
[00:55.99]ä»–çš„ç¬‘å®¹ æœ‰ä½•ä¸åŒ
[00:58.53]åœ¨ä½ å¿ƒä¸­ æˆ‘ä¸å†å—å® 
[01:01.18]æˆ‘çš„å¤©ç©º æ˜¯é›¨æ˜¯é£ è¿˜æ˜¯å½©è™¹
[01:04.87]ä½ åœ¨æ“çºµ
[01:06.77]æ¨è‡ªå·±çœŸçš„æ²¡ç”¨æƒ…ç»ªæ¿€åŠ¨
[01:11.82]ä¸€é¢—å¿ƒåˆ°ç°åœ¨è¿˜åœ¨æŠ½ç—›
[01:16.62]è¿˜ä¸ºåˆ†æ‰‹å‰é‚£å¥æŠ±æ­‰åœ¨æ„ŸåŠ¨
[01:26.68]ç©¿æ¢­æ—¶é—´çš„ç”»é¢çš„é’Ÿ
[01:31.72]ä»åæ–¹å‘ å¼€å§‹ç§»åŠ¨
[01:36.84]å›åˆ°å½“åˆçˆ±ä½ çš„æ—¶ç©º
[01:41.93]åœæ ¼å†…å®¹ ä¸å¿ 
[01:46.91]æ‰€æœ‰å›å¿†å¯¹ç€æˆ‘è¿›æ”»
[01:52.05]æˆ‘çš„ä¼¤å£ è¢«ä½ æ‹†å°
[01:57.15]èª“è¨€å¤ªæ²‰é‡æ³ªè¢«çºµå®¹
[02:02.17]è„¸ä¸Šæ±¹æ¶Œ å¤±æ§
[02:17.39]åŸå¸‚éœ“è™¹ ä¸å®‰è·³åŠ¨
[02:18.74]æŸ“çº¢å¤œç©º è¿‡å»ç§ç§
[02:20.20]åƒä¸€åœºæ¢¦ ä¸æ•¢å»ç¢°
[02:21.59]ä¸€æƒ³å°±ç—› å¿ƒç¢å†…å®¹
[02:22.86]æ¯ä¸€ç§’é’Ÿ éƒ½æœ‰ä¸åŒ
[02:24.17]ä½ ä¸æ‡‚ è¿ä¸€å¥çé‡
[02:25.69]ä¹Ÿæœ‰è‹¦è¡· ä¹Ÿä¸æƒ³é€
[02:27.13]å¯’é£ä¸­ åºŸå¢ŸçƒŸå›±
[02:28.24]åœæ­¢è½¬åŠ¨ ä¸€åˆ‡è½ç©º
[02:29.60]åœ¨äººæµ·ä¸­ç›²ç›®è·Ÿä»
[02:31.08]åˆ«äººçš„æ¢¦ å…¨é¢æ”¾çºµ
[02:32.44]æ¨æ²¡æœ‰ç”¨ ç–—ä¼¤æ­¢ç—›
[02:33.67]ä¸å†æ„ŸåŠ¨ æ²¡æœ‰æ¢¦
[02:35.05]ç—›ä¸çŸ¥è½»é‡
[02:35.83]æ³ªæ°´é²œçº¢ å…¨é¢æ”¾çºµ
[02:48.14]æ¨è‡ªå·±çœŸçš„æ²¡ç”¨æƒ…ç»ªæ¿€åŠ¨
[02:53.29]ä¸€é¢—å¿ƒåˆ°ç°åœ¨è¿˜åœ¨æŠ½ç—›
[02:58.02]è¿˜ä¸ºåˆ†æ‰‹å‰é‚£å¥æŠ±æ­‰åœ¨æ„ŸåŠ¨
[03:08.19]ç©¿æ¢­æ—¶é—´çš„ç”»é¢çš„é’Ÿ
[03:13.22]ä»åæ–¹å‘ å¼€å§‹ç§»åŠ¨
[03:18.32]å›åˆ°å½“åˆçˆ±ä½ çš„æ—¶ç©º
[03:23.33]åœæ ¼å†…å®¹ ä¸å¿ 
[03:28.46]æ‰€æœ‰å›å¿†å¯¹ç€æˆ‘è¿›æ”»
[03:33.52]æˆ‘çš„ä¼¤å£ è¢«ä½ æ‹†å°
[03:38.58]èª“è¨€å¤ªæ²‰é‡æ³ªè¢«çºµå®¹
[03:43.67]è„¸ä¸Šæ±¹æ¶Œ å¤±æ§
[03:48.72]ç©¿æ¢­æ—¶é—´çš„ç”»é¢çš„é’Ÿ
[03:53.78]ä»åæ–¹å‘ å¼€å§‹ç§»åŠ¨
[03:58.84]å›åˆ°å½“åˆçˆ±ä½ çš„æ—¶ç©º
[04:03.96]åœæ ¼å†…å®¹ ä¸å¿ 
[04:09.00]æ‰€æœ‰å›å¿†å¯¹ç€æˆ‘è¿›æ”»`;
            
            let lrcData = [];
            let currentLrcIndex = -1;

            // --- [æ–°å¢] éŸ³é¢‘ API å˜é‡ ---
            let audioContext;
            let analyser;
            let sourceNode;
            let dataArray;
            let isAudioAPIInit = false;
            let bufferLength;

            // === åŸºç¡€åŠŸèƒ½å‡½æ•° ===
            function showToast(msg) {
                toast.textContent = msg;
                toast.classList.add('show');
                setTimeout(() => toast.classList.remove('show'), 2000);
            }

            function formatTime(seconds) {
                const mins = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
            }

            // === [æ–°å¢] LRC æ­Œè¯è§£æ ===
            function parseLRC(lrc) {
                const lines = lrc.split('\n');
                const result = [];
                const timeRegex = /\[(\d{2}):(\d{2})\.(\d{2,3})\](.*)/;
                for (const line of lines) {
                    const match = line.match(timeRegex);
                    if (match) {
                        const time = parseInt(match[1], 10) * 60 + parseInt(match[2], 10) + parseInt(match[3].padEnd(3, '0'), 10) / 1000;
                        const text = match[4].trim() || '...';
                        result.push({ time, text });
                    }
                }
                return result.sort((a, b) => a.time - b.time);
            }

            // === [æ–°å¢] æ›´æ–°æ­Œè¯ ===
            function updateLyrics(currentTime) {
                if (!lrcData.length) return;
                let newIndex = -1;
                for (let i = 0; i < lrcData.length; i++) {
                    if (currentTime >= lrcData[i].time) {
                        newIndex = i;
                    } else {
                        break;
                    }
                }
                if (newIndex !== currentLrcIndex) {
                    currentLrcIndex = newIndex;
                    const newText = lrcData[currentLrcIndex] ? lrcData[currentLrcIndex].text : '&nbsp;';
                    lyricsLine.style.opacity = 0;
                    setTimeout(() => {
                        lyricsLine.innerHTML = newText;
                        lyricsLine.style.opacity = 1;
                    }, 150);
                }
            }

            // === [æ–°å¢] åˆå§‹åŒ–éŸ³é¢‘ API (é¢‘è°±) ===
            function initAudioAPI() {
                if (isAudioAPIInit) return;
                try {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    analyser = audioContext.createAnalyser();
                    analyser.fftSize = 256;
                    bufferLength = analyser.frequencyBinCount;
                    dataArray = new Uint8Array(bufferLength);
                    sourceNode = audioContext.createMediaElementSource(audio);
                    sourceNode.connect(analyser);
                    analyser.connect(audioContext.destination);
                    isAudioAPIInit = true;
                    resizeCanvas();
                    drawSpectrum();
                } catch (e) {
                    console.error('åˆå§‹åŒ–éŸ³é¢‘é¢‘è°±å¤±è´¥:', e);
                    lyricsLine.innerHTML = '[ éŸ³é¢‘é¢‘è°±åŠ è½½å¤±è´¥(CORS) ]';
                }
            }
            
            // === [æ–°å¢] ç”»å¸ƒå°ºå¯¸è°ƒæ•´ ===
            function resizeCanvas() {
                if (!canvas) return;
                canvas.width = canvas.offsetWidth * window.devicePixelRatio;
                canvas.height = canvas.offsetHeight * window.devicePixelRatio;
            }
            window.addEventListener('resize', resizeCanvas);

            // === [æ–°å¢] ç»˜åˆ¶é¢‘è°±å‡½æ•° (åŠ¨ç”»å¾ªç¯) ===
            function drawSpectrum() {
                requestAnimationFrame(drawSpectrum);
                if (!isAudioAPIInit || !analyser) return;

                analyser.getByteFrequencyData(dataArray);
                canvasCtx.clearRect(0, 0, canvas.width, canvas.height);
                
                const barWidth = (canvas.width / bufferLength) * 1.2;
                let x = 0;
                
                const gradient = canvasCtx.createLinearGradient(0, 0, 0, canvas.height);
                gradient.addColorStop(0, '#764ba2');
                gradient.addColorStop(1, '#667eea');
                canvasCtx.fillStyle = gradient;

                for (let i = 0; i < bufferLength; i++) {
                    const barHeight = (dataArray[i] / 255) * canvas.height;
                    canvasCtx.fillRect(x, canvas.height - barHeight, barWidth, barHeight);
                    x += barWidth + 1;
                }
            }

            // === äº‹ä»¶ç›‘å¬ ===
            document.getElementById('playBtn').addEventListener('click', () => {
                if (!isAudioAPIInit) {
                    initAudioAPI();
                }
                if (audioContext && audioContext.state === 'suspended') {
                    audioContext.resume();
                }
                if (audio.paused) {
                    audio.play();
                    albumCover.classList.add('playing');
                    playIcon.innerHTML = '<rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/>';
                    showToast('æ­£åœ¨æ’­æ”¾');
                } else {
                    audio.pause();
                    albumCover.classList.remove('playing');
                    playIcon.innerHTML = '<path d="M8 5v14l11-7z"/>';
                    showToast('å·²æš‚åœ');
                }
            });

            document.getElementById('backwardBtn').addEventListener('click', () => {
                audio.currentTime -= 10;
                showToast('åé€€ 10 ç§’');
            });

            document.getElementById('forwardBtn').addEventListener('click', () => {
                audio.currentTime += 10;
                showToast('å¿«è¿› 10 ç§’');
            });

            loopBtn.addEventListener('click', () => {
                audio.loop = !audio.loop;
                if (audio.loop) {
                    loopBtn.classList.add('active');
                    showToast('å·²å¼€å¯å•æ›²å¾ªç¯');
                } else {
                    loopBtn.classList.remove('active');
                    showToast('å·²å…³é—­å¾ªç¯');
                }
            });

            volumeBtn.addEventListener('click', () => {
                audio.muted = !audio.muted;
                const icon = document.getElementById('volumeIcon');
                if (audio.muted) {
                    icon.innerHTML = '<path d="M16.5 12a4.5 4.5 0 0 0-1.77-3.55l-.68.68c.55.46.95 1.07 1.07 1.78h1.38zM12 4L9.91 6.09 12 8.18V4zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>';
                    showToast('å·²é™éŸ³');
                } else {
                    icon.innerHTML = '<path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>';
                    showToast('å·²å–æ¶ˆé™éŸ³');
                }
            });

            audio.addEventListener('timeupdate', () => {
                const progress = (audio.currentTime / audio.duration) * 100;
                progressFill.style.width = progress + '%';
                currentTime.textContent = formatTime(audio.currentTime);
                // [MODIFIED] è°ƒç”¨æ­Œè¯æ›´æ–°
                updateLyrics(audio.currentTime);
            });

            audio.addEventListener('loadedmetadata', () => {
                totalTime.textContent = formatTime(audio.duration);
            });

            progressTrack.addEventListener('click', (e) => {
                const rect = progressTrack.getBoundingClientRect();
                const percent = (e.clientX - rect.left) / rect.width;
                audio.currentTime = percent * audio.duration;
            });

            // === [æ–°å¢] é¡µé¢åŠ è½½åç«‹å³æ‰§è¡Œ ===
            lrcData = parseLRC(lrcString);
            lyricsLine.innerHTML = lrcData.length > 0 ? lrcData[0].text : 'æ­Œè¯åŠ è½½å®Œæ¯•';
            // åˆå§‹ç”»å¸ƒå¤§å°
            resizeCanvas();

        })(); // ç»“æŸç¬¬6åŒºçš„ä¸“å±è„šæœ¬

    </script>
</body>
</html>

